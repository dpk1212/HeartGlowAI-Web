<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HeartGlowAI - Let's Help You Say Something Real</title>
  <meta name="description" content="AI-powered heartfelt message generator for all your relationships. Create authentic messages for loved ones.">
  
  <!-- CRITICAL CSS to ensure page loads -->
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      padding: 0;
      display: block;
      min-height: 100vh;
    }
    
    main {
      max-width: 800px;
      margin: 60px auto;
      padding: 20px;
      display: block;
    }
    
    .emotion-button {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 16px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .page-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 12px;
      color: #ff6b9d;
    }
    
    .page-subtitle {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 40px;
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
      background: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
  </style>
  
  <!-- Resource Hints -->
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="css/styles.css" as="style">
  <link rel="preload" href="js/emotional-entry.js" as="script">
  
  <!-- Font Loading -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBZiJPTs7dMccVgFV-YoTejnhy1bZNFEQY",
      authDomain: "heartglowai.firebaseapp.com",
      projectId: "heartglowai",
      storageBucket: "heartglowai.firebasestorage.app",
      messagingSenderId: "196565711798",
      appId: "1:196565711798:web:79e2b0320fd8e74ab0df17",
      measurementId: "G-KJMPL1DNPY"
    };
    
    // Initialize Firebase if not already initialized
    if (!window.firebase || !firebase.apps || !firebase.apps.length) {
      try {
        firebase.initializeApp(firebaseConfig);
        console.log("Firebase initialized successfully");
      } catch (error) {
        console.error("Firebase initialization error:", error);
      }
    } else {
      console.log("Firebase already initialized");
    }
    
    // Critical: Set persistence to LOCAL to maintain auth state between pages
    if (firebase && firebase.auth) {
      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
        .then(() => {
          console.log("Firebase persistence set to LOCAL.");
        })
        .catch((error) => {
          console.error("Auth persistence error:", error);
        });
    }
  </script>
</head>
<body style="background-color: #121212 !important; color: white !important; visibility: visible !important; display: block !important;">
  <!-- Debug Console -->
  <div id="debug-console" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.8); color: #0f0; padding: 10px; max-height: 200px; overflow: auto; font-family: monospace; z-index: 9999;">
    <div>
      Debug Console: 
      <button onclick="document.getElementById('debug-console').style.display='none'">Close</button>
    </div>
    <div id="debug-output"></div>
  </div>

  <!-- Header and Navigation -->
  <header class="header">
    <div class="logo-container">
      <div class="logo-heart">‚ù§Ô∏è</div>
      <div class="logo-text">HeartGlowAI</div>
    </div>
    <nav class="nav-bar">
      <button id="dashboard-btn" class="nav-button">
        <i class="fas fa-columns"></i> Dashboard
      </button>
      <button id="history-btn" class="nav-button">
        <i class="fas fa-history"></i> History
      </button>
      <button id="learn-btn" class="nav-button">
        <i class="fas fa-brain"></i> Learn
      </button>
      <button id="logout-btn" class="nav-button">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </nav>
  </header>

  <main class="entry-card-container" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
    <h1 class="page-title">Let's help you say something real.</h1>
    <p class="page-subtitle">Select your emotional starting point, and we'll guide you through creating a meaningful message.</p>
    
    <!-- Emotional Entry Point Buttons -->
    <div class="emotion-button" data-emotion="vulnerability">
      <div class="emotion-icon">‚ù§Ô∏è</div>
      <div class="emotion-content">
        <h3 class="emotion-title">I've been holding something in...</h3>
        <p class="emotion-description">Express feelings you've been keeping to yourself</p>
      </div>
      <div class="emotion-arrow">‚Üí</div>
      <div class="glow-effect" style="left: 20px; top: 20px;"></div>
    </div>
    
    <div class="emotion-button" data-emotion="reconnect">
      <div class="emotion-icon">üí¨</div>
      <div class="emotion-content">
        <h3 class="emotion-title">I want to reconnect.</h3>
        <p class="emotion-description">Rebuild a relationship after time apart</p>
      </div>
      <div class="emotion-arrow">‚Üí</div>
      <div class="glow-effect" style="left: 20px; top: 20px;"></div>
    </div>
    
    <div class="emotion-button" data-emotion="appreciation">
      <div class="emotion-icon">üëè</div>
      <div class="emotion-content">
        <h3 class="emotion-title">I want to show appreciation.</h3>
        <p class="emotion-description">Express gratitude for someone important to you</p>
      </div>
      <div class="emotion-arrow">‚Üí</div>
      <div class="glow-effect" style="left: 20px; top: 20px;"></div>
    </div>
    
    <div class="emotion-button" data-emotion="explore">
      <div class="emotion-icon">üîç</div>
      <div class="emotion-content">
        <h3 class="emotion-title">Not sure ‚Äî let me explore.</h3>
        <p class="emotion-description">Browse different message types and find what fits</p>
      </div>
      <div class="emotion-arrow">‚Üí</div>
      <div class="glow-effect" style="left: 20px; top: 20px;"></div>
    </div>
  </main>

  <!-- Ambient background particles -->
  <div class="particles-container">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <!-- JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
  
  <script>
    // Debug logging function
    function debugLog(message) {
      console.log('DEBUG:', message);
      const debugOutput = document.getElementById('debug-output');
      if (debugOutput) {
        const logEntry = document.createElement('div');
        logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        debugOutput.appendChild(logEntry);
      }
    }
    
    // Show debug console on certain errors
    window.addEventListener('error', function(e) {
      const debugConsole = document.getElementById('debug-console');
      if (debugConsole) {
        debugConsole.style.display = 'block';
        debugLog(`ERROR: ${e.message} at ${e.filename}:${e.lineno}`);
      }
    });
    
    // Add debug button
    document.addEventListener('DOMContentLoaded', function() {
      const debugBtn = document.createElement('button');
      debugBtn.textContent = 'Debug';
      debugBtn.style.position = 'fixed';
      debugBtn.style.bottom = '10px';
      debugBtn.style.right = '10px';
      debugBtn.style.zIndex = '9999';
      debugBtn.style.padding = '5px 10px';
      debugBtn.style.background = '#333';
      debugBtn.style.color = '#fff';
      debugBtn.style.border = 'none';
      debugBtn.style.borderRadius = '4px';
      debugBtn.style.cursor = 'pointer';
      
      debugBtn.addEventListener('click', function() {
        const debugConsole = document.getElementById('debug-console');
        if (debugConsole) {
          debugConsole.style.display = debugConsole.style.display === 'none' ? 'block' : 'none';
        }
      });
      
      document.body.appendChild(debugBtn);
      
      // Log initial page load
      debugLog('Page fully loaded');
    });

    // Check if stylesheets loaded properly
    document.addEventListener('DOMContentLoaded', function() {
      const stylesheets = document.styleSheets;
      let stylesLoaded = false;
      
      for (let i = 0; i < stylesheets.length; i++) {
        try {
          if (stylesheets[i].href && stylesheets[i].href.includes('styles.css')) {
            stylesLoaded = true;
            console.log('Main stylesheet loaded successfully');
            debugLog('Main stylesheet loaded successfully');
            break;
          }
        } catch (e) {
          console.error('Error checking stylesheets:', e);
        }
      }
      
      if (!stylesLoaded) {
        console.error('Main stylesheet failed to load!');
        debugLog('ERROR: Main stylesheet failed to load!');
        
        // Apply emergency styles
        const style = document.createElement('style');
        style.textContent = `
          body { background-color: #121212 !important; color: white !important; }
          .emotion-button { 
            background-color: rgba(255, 255, 255, 0.1) !important; 
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            margin-bottom: 15px !important;
            padding: 20px !important;
            border-radius: 10px !important;
          }
          .emotion-title { color: white !important; }
          .emotion-description { color: rgba(255, 255, 255, 0.7) !important; }
        `;
        document.head.appendChild(style);
        debugLog('Emergency styles applied');
      }
      
      // Force display of buttons
      const buttons = document.querySelectorAll('.emotion-button');
      if (buttons.length) {
        debugLog(`Found ${buttons.length} emotion buttons`);
        buttons.forEach((btn, i) => {
          btn.style.display = 'flex !important';
          btn.style.visibility = 'visible !important';
          btn.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
          btn.style.border = '1px solid rgba(255, 255, 255, 0.2)';
          btn.style.borderRadius = '10px';
          btn.style.padding = '20px';
          btn.style.marginBottom = '15px';
          debugLog(`Forced display of button ${i+1}`);
        });
      } else {
        debugLog('ERROR: No emotion buttons found in DOM!');
      }
      
      // Show debug console automatically on page load
      const debugConsole = document.getElementById('debug-console');
      if (debugConsole) {
        debugConsole.style.display = 'block';
      }
    });
  </script>
  
  <script src="js/emotional-entry.js"></script>
</body>
</html> 