(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{7958:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/connections",function(){return r(4758)}])},4758:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AllConnectionsPage}});var n=r(5893),a=r(7294),s=r(1664),o=r.n(s),i=r(6571),l=r(8549),d=r(1798),c=r(1810),g=r(9406);let getInitials=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?",getFrequencyColor=e=>{switch(e){case"frequent":return"bg-purple-500";case"recent":return"bg-blue-500";case"new":return"bg-green-500";default:return"bg-gray-500"}},ConnectionGridCard=e=>{let{connection:t}=e,r=(0,d.RU)(t),a=t.lastMessageDate?(0,d.SY)(t.lastMessageDate):"No messages yet";return(0,n.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-heartglow-deepgray rounded-lg shadow-md border border-gray-100 dark:border-gray-800 p-4 transition-all duration-300 hover:shadow-lg group transform hover:-translate-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsxs)("div",{className:"relative mr-3",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-heartglow-pink to-heartglow-violet flex items-center justify-center text-white text-lg font-semibold shadow-sm",children:getInitials(t.name)}),(0,n.jsx)("div",{className:"absolute -right-1 bottom-0 w-3 h-3 rounded-full border-2 border-white dark:border-heartglow-deepgray ".concat(getFrequencyColor(r))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-heartglow-charcoal dark:text-heartglow-offwhite text-md",children:t.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.relationship||"Connection"})]})]}),(0,n.jsxs)("p",{className:"text-xs text-heartglow-pink mb-3",children:["Last message: ",a]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)(o(),{href:"/connections/".concat(t.id),className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:"View/Edit"}),(0,n.jsx)(o(),{href:"/create?recipientId=".concat(t.id,"&recipientName=").concat(encodeURIComponent(t.name),"&relationship=").concat(encodeURIComponent(t.relationship||"")),className:"text-xs bg-heartglow-pink/10 text-heartglow-pink px-3 py-1 rounded-full hover:bg-heartglow-pink/20",children:"New Message"})]})]})};function AllConnectionsPage(){let{currentUser:e}=(0,l.a)(),[t,r]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let loadData=async()=>{if(e)try{i(!0);let t=await (0,d.S7)(e,1e3);r(t),x(null)}catch(e){console.error("Error fetching all connections:",e),x("Failed to load connections.")}finally{i(!1)}};loadData()},[e]),(0,n.jsx)(g.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-heartglow-charcoal dark:text-heartglow-offwhite",children:"Your Connections"}),(0,n.jsxs)(o(),{href:"/connections/add",className:"inline-flex items-center justify-center bg-gradient-to-r from-heartglow-pink to-heartglow-violet text-white font-medium rounded-full px-5 py-2.5 shadow-md hover:shadow-lg hover:shadow-glow transition-all duration-300",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Connection"]})]}),s&&(0,n.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-heartglow-pink"})}),h&&(0,n.jsx)("div",{className:"text-center py-10 bg-red-50 dark:bg-red-900/20 p-6 rounded-lg",children:(0,n.jsx)("p",{className:"text-red-600 dark:text-red-300",children:h})}),!s&&!h&&0===t.length&&(0,n.jsx)("div",{className:"text-center py-10 bg-gray-50 dark:bg-gray-800/30 p-6 rounded-lg",children:(0,n.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't added any connections yet."})}),!s&&!h&&t.length>0&&(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(e=>(0,n.jsx)(ConnectionGridCard,{connection:e},e.id))})]})})})}}},function(e){e.O(0,[700,664,608,774,888,179],function(){return e(e.s=7958)}),_N_E=e.O()}]);