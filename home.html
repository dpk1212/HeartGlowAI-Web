<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HeartGlowAI - Dashboard</title>
  <meta name="description" content="AI-powered heartfelt message generator for all your relationships. Create authentic messages for loved ones.">
  
  <!-- Resource Hints -->
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="css/main.css" as="style">
  <link rel="preload" href="js/home.js" as="script">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- FontAwesome -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  
  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
  <script>
    // Initialize Firebase with error handling
    try {
      const firebaseConfig = {
        apiKey: "AIzaSyBZiJPTs7dMccVgFV-YoTejnhy1bZNFEQY",
        authDomain: "heartglowai.firebaseapp.com",
        projectId: "heartglowai",
        storageBucket: "heartglowai.firebasestorage.app",
        messagingSenderId: "196565711798",
        appId: "1:196565711798:web:79e2b0320fd8e74ab0df17",
        measurementId: "G-KJMPL1DNPY"
      };
      
      console.log("Starting Firebase initialization...");
      
      // Initialize Firebase if not already initialized
      if (!window.firebase || !firebase.apps || !firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
        console.log("Firebase initialized successfully");
      } else {
        console.log("Firebase already initialized");
      }
      
      // Critical: Set persistence to LOCAL for auth
      if (firebase && firebase.auth) {
        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
          .catch(function(error) {
            console.error("Auth persistence error:", error);
            // Continue anyway, not critical
          });
      }
    } catch (e) {
      console.error("Firebase initialization failed:", e);
      // Continue anyway, app will use sample data
    }
  </script>
</head>

<body class="home-page">
  <div class="home-page__container">
    <!-- Header -->
    <header class="home-page__header">
      <a href="index.html" class="home-page__logo">
        <div class="home-page__logo-text">HeartGlow<span class="home-page__logo-highlight">AI</span></div>
      </a>
      <div class="home-page__user-menu">
        <div class="home-page__user-avatar" id="userInitials">
          <!-- Will be populated with user initials via JS -->
        </div>
      </div>
    </header>

    <!-- Welcome section -->
    <section class="home-page__welcome">
      <h1 class="home-page__welcome-title">Welcome to HeartGlowAI</h1>
      <p class="home-page__welcome-subtitle">Create heartfelt messages for your loved ones with our AI-powered assistant.</p>
    </section>

    <!-- Action Card -->
    <div class="home-page__action-card">
      <h2 class="home-page__action-title">Create a Heartfelt Message</h2>
      <p class="home-page__action-text">Our AI will help you craft the perfect message for any occasion. Express your feelings with authenticity and warmth.</p>
      <button id="create-message-btn" class="home-page__action-button">
        Create New Message <span class="home-page__action-button-icon">→</span>
      </button>
    </div>

    <!-- Dashboard layout -->
    <div class="home-page__dashboard">
      <!-- Left column -->
      <div class="home-page__dashboard-left">
        <!-- Recent Messages -->
        <div class="home-page__card">
          <div class="home-page__card-header">
            <h3 class="home-page__card-title">
              <span class="home-page__card-icon"><i class="fas fa-history"></i></span>
              Recent Messages
            </h3>
            <a href="#" class="home-page__card-action" id="view-all-messages">
              View All <span class="home-page__card-action-icon">→</span>
            </a>
          </div>

          <div class="home-page__messages" id="recent-messages-list">
            <!-- Messages will be populated via JS -->
            <!-- Example message card (will be replaced by real content) -->
            <div class="home-page__message-card">
              <div class="home-page__message-header">
                <div class="home-page__message-meta">
                  <div class="home-page__message-type">Romantic</div>
                  <div class="home-page__message-time">25 minutes ago</div>
                </div>
              </div>
              <div class="home-page__message-text">
                "I've been thinking about you lately, and I realized I never properly told you how much your presence means to me. Your laugh, your kindness, the way you see the world - it all brings so much joy into my life."
              </div>
              <div class="home-page__message-actions">
                <button class="home-page__message-button">
                  <i class="far fa-copy"></i> Copy
                </button>
                <button class="home-page__message-button">
                  <i class="far fa-edit"></i> Edit
                </button>
                <button class="home-page__message-button home-page__message-button--primary">
                  <i class="fas fa-share"></i> Share
                </button>
              </div>
            </div>

            <div class="home-page__message-card">
              <div class="home-page__message-header">
                <div class="home-page__message-meta">
                  <div class="home-page__message-type">Professional</div>
                  <div class="home-page__message-time">30 minutes ago</div>
                </div>
              </div>
              <div class="home-page__message-text">
                "Your guidance on the recent project helped us navigate complex challenges with remarkable clarity and purpose. Your leadership created a vision that inspired the entire team to deliver beyond expectations."
              </div>
              <div class="home-page__message-actions">
                <button class="home-page__message-button">
                  <i class="far fa-copy"></i> Copy
                </button>
                <button class="home-page__message-button">
                  <i class="far fa-edit"></i> Edit
                </button>
                <button class="home-page__message-button home-page__message-button--primary">
                  <i class="fas fa-share"></i> Share
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right column -->
      <div class="home-page__dashboard-right">
        <!-- My Connections -->
        <div class="home-page__card">
          <div class="home-page__card-header">
            <h3 class="home-page__card-title">
              <span class="home-page__card-icon"><i class="fas fa-users"></i></span>
              My Connections
            </h3>
            <a href="#" class="home-page__card-action" id="manage-connections">
              Manage <span class="home-page__card-action-icon">→</span>
            </a>
          </div>

          <div class="home-page__connections" id="connections-list">
            <!-- Connections will be populated via JS -->
            <!-- Example connection (will be replaced by real content) -->
            <div class="home-page__connection">
              <div class="home-page__connection-info">
                <div class="home-page__connection-avatar">K</div>
                <div class="home-page__connection-details">
                  <div class="home-page__connection-name">Kate</div>
                  <div class="home-page__connection-type">romantic</div>
                </div>
              </div>
              <div class="home-page__connection-actions">
                <button class="home-page__connection-button">
                  <i class="fas fa-paper-plane"></i>
                </button>
                <button class="home-page__connection-button">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="home-page__connection-button">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>

            <div class="home-page__connection">
              <div class="home-page__connection-info">
                <div class="home-page__connection-avatar">D</div>
                <div class="home-page__connection-details">
                  <div class="home-page__connection-name">Dad</div>
                  <div class="home-page__connection-type">family</div>
                </div>
              </div>
              <div class="home-page__connection-actions">
                <button class="home-page__connection-button">
                  <i class="fas fa-paper-plane"></i>
                </button>
                <button class="home-page__connection-button">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="home-page__connection-button">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>

            <!-- Add connection button -->
            <button class="home-page__add-connection" id="add-connection-btn">
              <span class="home-page__add-connection-icon"><i class="fas fa-plus"></i></span>
              Add New Connection
            </button>
          </div>
        </div>

        <!-- Upcoming Reminders -->
        <div class="home-page__card">
          <div class="home-page__card-header">
            <h3 class="home-page__card-title">
              <span class="home-page__card-icon"><i class="fas fa-bell"></i></span>
              Upcoming Reminders
            </h3>
            <a href="#" class="home-page__card-action" id="manage-reminders">
              Manage <span class="home-page__card-action-icon">→</span>
            </a>
          </div>

          <div class="home-page__reminders" id="reminders-list">
            <!-- Empty state for reminders -->
            <div class="home-page__empty-state">
              <div class="home-page__empty-state-icon">
                <i class="fas fa-bell-slash"></i>
              </div>
              <div class="home-page__empty-state-text">No upcoming reminders</div>
              <div class="home-page__empty-state-subtext">Set reminders when sending messages to stay connected</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for viewing all messages -->
  <div id="all-messages-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>All Messages</h2>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div id="all-messages-list" class="messages-list all-messages-list">
          <!-- Will be populated via JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for viewing a single message -->
  <div id="view-message-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Message Details</h2>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div id="message-details" class="message-details">
          <!-- Will be populated via JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-container">
      <div class="heart-animation">
        <div class="heart-shape"></div>
        <div class="heart-glow"></div>
        <div class="heart-particles">
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
        </div>
      </div>
      <div id="loadingContext" class="loading-context">Loading...</div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="js/home.js"></script>
  <script src="js/animation.js"></script>
</body>
</html> 