<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeartGlowAI - What tone do you want?</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a154b;
            --accent-pink: #ff6b9d;
            --accent-purple: #7b2cbf;
            --bg-dark: #1f0a21;
            --bg-darker: #0f0113;
            --text-light: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --border-light: rgba(255, 255, 255, 0.1);
            --primary-gradient: linear-gradient(45deg, #ff6b9d, #7b2cbf);
            --card-bg: rgba(255, 255, 255, 0.03);
            --card-hover: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 2rem;
        }

        .step-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .step-indicator {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .step-dot {
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background-color: var(--border-light);
        }

        .step-dot.active {
            background: var(--accent-pink);
            width: 1.8rem;
            border-radius: 0.25rem;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }

        .page-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .recipient-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
        }

        .recipient-avatar {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--accent-pink);
        }

        .recipient-details {
            flex: 1;
        }

        .recipient-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .recipient-relation {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .intent-info {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
        }

        .intent-icon {
            font-size: 1.2rem;
            color: var(--accent-pink);
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 107, 157, 0.1);
            border-radius: 50%;
        }

        .intent-details {
            flex: 1;
        }

        .intent-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .intent-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .tone-section {
            margin-bottom: 2.5rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .tone-pills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
            margin-bottom: 1.5rem;
        }

        .tone-pill {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 2rem;
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .tone-pill:hover {
            background: var(--card-hover);
        }

        .tone-pill.selected {
            background: rgba(255, 107, 157, 0.2);
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .intensity-slider-container {
            margin-bottom: 2.5rem;
        }

        .intensity-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .intensity-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .intensity-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 0.5rem;
            border-radius: 0.25rem;
            background: var(--card-bg);
            outline: none;
            margin-bottom: 1rem;
        }

        .intensity-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
        }

        .intensity-slider::-moz-range-thumb {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
            border: none;
        }

        .intensity-visual {
            width: 100%;
            height: 0.5rem;
            background: linear-gradient(to right, rgba(255, 107, 157, 0.2), rgba(255, 107, 157, 1));
            border-radius: 0.25rem;
        }

        .preview-section {
            background: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .preview-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .preview-action {
            color: var(--accent-pink);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .message-preview {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            padding: 1.5rem;
            font-size: 0.9rem;
            line-height: 1.7;
            position: relative;
        }

        .message-preview::before {
            content: 'Preview';
            position: absolute;
            top: -0.5rem;
            left: 1rem;
            background: var(--accent-pink);
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
        }

        .button-container {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            flex: 1;
            padding: 0.8rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text-light);
            border: 1px solid var(--border-light);
        }

        .btn-secondary:hover {
            background: var(--card-hover);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: var(--text-light);
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        @media (min-width: 768px) {
            .container {
                padding: 0 2rem;
            }

            .page-title {
                font-size: 2.2rem;
            }

            .page-subtitle {
                font-size: 1.1rem;
            }

            .btn {
                padding: 1rem 2rem;
            }
        }

        @media (min-width: 1024px) {
            .container {
                padding: 0 3rem;
            }

            .info-row {
                display: flex;
                gap: 1.5rem;
            }

            .recipient-info, .intent-info {
                flex: 1;
            }
        }

        /* Loading overlay styles */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 1, 21, 0.9);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation-duration: 0.4s;
            display: none;
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 320px;
        }

        .heart-animation {
            position: relative;
            width: 80px;
            height: 80px;
            margin-bottom: 30px;
        }

        .heart-shape {
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") center/contain no-repeat;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") center/contain no-repeat;
            animation: pulse 2s infinite ease-in-out;
        }

        .heart-glow {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: radial-gradient(circle, rgba(255, 107, 157, 0.6) 0%, rgba(255, 107, 157, 0) 70%);
            border-radius: 50%;
            animation: glow 2s infinite alternate;
            filter: blur(10px);
        }

        .loading-context {
            font-size: 20px;
            color: white;
            font-weight: 500;
            text-align: center;
            margin-top: 10px;
            animation: fadeInOut 2s infinite alternate;
            max-width: 280px;
            line-height: 1.5;
        }

        @keyframes pulse {
            0% { transform: scale(0.95); }
            50% { transform: scale(1.05); }
            100% { transform: scale(0.95); }
        }

        @keyframes glow {
            0% { opacity: 0.5; transform: scale(0.9); }
            100% { opacity: 0.8; transform: scale(1.1); }
        }

        @keyframes fadeInOut {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .slideUp {
            animation: slideUp 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="step-header">
            <div class="step-title">Step 3 of 3</div>
            <div class="step-indicator">
                <div class="step-dot"></div>
                <div class="step-dot"></div>
                <div class="step-dot active"></div>
            </div>
        </div>

        <h1 class="page-title">What tone do you want?</h1>
        <p class="page-subtitle">Personalize how your message should feel to the recipient.</p>

        <div class="info-row">
            <div class="recipient-info">
                <div class="recipient-avatar" style="background-image: url('https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=334&q=80');"></div>
                <div class="recipient-details">
                    <div class="recipient-name">Sarah Johnson</div>
                    <div class="recipient-relation">Partner</div>
                </div>
            </div>

            <div class="intent-info">
                <div class="intent-icon">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <div class="intent-details">
                    <div class="intent-title">I care about them</div>
                    <div class="intent-description">Express your deep care and concern</div>
                </div>
            </div>
        </div>

        <div class="tone-section">
            <div class="section-title">Select tone</div>
            <div class="tone-pills">
                <div class="tone-pill" data-tone="gentle">Gentle</div>
                <div class="tone-pill" data-tone="encouraging">Encouraging</div>
                <div class="tone-pill" data-tone="honest">Honest</div>
                <div class="tone-pill" data-tone="warm">Warm</div>
                <div class="tone-pill" data-tone="vulnerable">Vulnerable</div>
                <div class="tone-pill" data-tone="direct">Direct</div>
                <div class="tone-pill" data-tone="playful">Playful</div>
                <div class="tone-pill" data-tone="thoughtful">Thoughtful</div>
                <div class="tone-pill" data-tone="hopeful">Hopeful</div>
            </div>
        </div>

        <div class="intensity-slider-container">
            <div class="section-title">Intensity</div>
            <div class="intensity-labels">
                <div class="intensity-label">Soft</div>
                <div class="intensity-label">Strong</div>
            </div>
            <input type="range" min="1" max="5" value="3" class="intensity-slider" id="intensity-slider">
            <div class="intensity-visual"></div>
        </div>

        <div class="preview-section">
            <div class="preview-header">
                <div class="preview-title">Message Preview</div>
                <div class="preview-action" id="refresh-preview">
                    <i class="fas fa-sync-alt"></i> Refresh
                </div>
            </div>
            <div class="message-preview" id="message-preview">
                Select a tone and adjust the intensity to see a preview of your message.
            </div>
        </div>

        <div class="button-container">
            <button class="btn btn-secondary" id="prev-step">
                <i class="fas fa-arrow-left"></i>
                <span>Back</span>
            </button>
            <button class="btn btn-primary" id="generate-message">
                <i class="fas fa-heart"></i>
                <span>Generate Message</span>
            </button>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-container">
            <div class="heart-animation">
                <div class="heart-glow"></div>
                <div class="heart-shape"></div>
            </div>
            <div class="loading-context" id="loadingContext">Crafting your heartfelt message...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tone pill selection
            const tonePills = document.querySelectorAll('.tone-pill');
            let selectedTone = null;

            tonePills.forEach(pill => {
                pill.addEventListener('click', function() {
                    if (this.classList.contains('selected')) {
                        this.classList.remove('selected');
                        selectedTone = null;
                    } else {
                        tonePills.forEach(p => p.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedTone = this;
                    }
                    updatePreview();
                });
            });

            // Intensity slider
            const intensitySlider = document.getElementById('intensity-slider');
            let intensity = intensitySlider.value;

            intensitySlider.addEventListener('input', function() {
                intensity = this.value;
                updatePreview();
            });

            // Message preview
            const messagePreview = document.getElementById('message-preview');
            const refreshPreview = document.getElementById('refresh-preview');

            function updatePreview() {
                if (!selectedTone) {
                    messagePreview.textContent = 'Select a tone and adjust the intensity to see a preview of your message.';
                    return;
                }

                const tone = selectedTone.getAttribute('data-tone');
                messagePreview.style.animation = 'none';
                messagePreview.offsetHeight; // Trigger reflow
                
                // Show loading in the preview
                messagePreview.textContent = 'Updating preview...';
                
                // Simulated delay to mimic API call
                setTimeout(() => {
                    const toneDescriptions = {
                        gentle: [
                            "I've been thinking about you lately and just wanted to check in. How are you doing? I'm here if you need anything.",
                            "I care about you and want you to know I'm thinking of you. Please take all the time you need, but know I'm here.",
                            "Sometimes the smallest things remind me of you. Just wanted to let you know you're in my thoughts and I'm here for you."
                        ],
                        encouraging: [
                            "I know things have been challenging lately, but I've seen your strength and I believe in you completely.",
                            "You've got this! I've watched you overcome so much, and I know this challenge is just one more victory waiting to happen.",
                            "Remember how far you've already come. I'm so proud of you and I know you have everything you need to succeed."
                        ],
                        honest: [
                            "I've been worried about you and wanted to check in. Our relationship means so much to me.",
                            "I need to be honest - I've been concerned about you lately. Can we talk? I care deeply about our connection.",
                            "Truth be told, I miss our conversations and the way we connect. I value our relationship too much to let it fade."
                        ],
                        warm: [
                            "Just sending some love your way today. You bring so much joy to my life, and I'm grateful for you.",
                            "Your presence in my life makes everything brighter. I just wanted you to know how much you mean to me.",
                            "Thinking of you and smiling. You've been such a blessing in my life, and I'm so thankful for our connection."
                        ],
                        vulnerable: [
                            "I've been feeling a bit lost lately, and you're one of the few people I trust enough to share this with.",
                            "I don't always know how to express this, but your support means everything to me. I don't know what I'd do without you.",
                            "It's scary to admit, but I've been struggling lately. You've always been someone I can turn to, and I need that now."
                        ],
                        direct: [
                            "I care about you and our relationship. Can we make time to connect soon?",
                            "I value you deeply and want to make sure you know it. Let's catch up soon.",
                            "I miss you. Let's not let more time pass before we reconnect."
                        ],
                        playful: [
                            "Just your friendly reminder that you're stuck with me caring about you. No returns or exchanges allowed!",
                            "Warning: This message contains high levels of appreciation for an awesome human (that's you).",
                            "If caring about someone was an Olympic sport, I'd definitely win gold for how much I care about you!"
                        ],
                        thoughtful: [
                            "I was reflecting on our journey together, and I'm filled with gratitude for your presence in my life.",
                            "The way you approach challenges with such grace has taught me so much. Thank you for being who you are.",
                            "I've been thinking about what makes our connection special, and it's your ability to truly see me. Thank you for that gift."
                        ],
                        hopeful: [
                            "I believe the best is yet to come for us. I'm looking forward to all the moments we'll share.",
                            "Every day brings new possibilities for connection. I'm excited for what's ahead for us.",
                            "I have so much hope for our future together. Thank you for being part of my journey."
                        ]
                    };

                    // Get a random message from the tone array based on intensity
                    const index = Math.min(Math.floor(Math.random() * 3), 2);
                    
                    // Adjust message based on intensity (1-5)
                    let message = toneDescriptions[tone][index];
                    
                    // Simple algorithm to adjust message based on intensity
                    if (intensity <= 2) {
                        // Softer: Shorter, more tentative
                        message = message.split('.')[0] + '.';
                        message = message.replace(/definitely|completely|so|very/g, '');
                    } else if (intensity >= 4) {
                        // Stronger: More emphasis, longer
                        message = message.replace(/I think|maybe|perhaps/g, 'I know');
                        message = message.replace(/care/g, 'care deeply');
                        message += ' I truly mean that from the bottom of my heart.';
                    }
                    
                    messagePreview.textContent = message;
                    messagePreview.style.animation = 'slideUp 0.5s ease forwards';
                }, 800);
            }

            refreshPreview.addEventListener('click', function() {
                if (selectedTone) {
                    updatePreview();
                }
            });

            // Navigation buttons
            document.getElementById('prev-step').addEventListener('click', function() {
                window.location.href = 'message-intent.html';
            });

            document.getElementById('generate-message').addEventListener('click', function() {
                if (!selectedTone) {
                    alert('Please select at least one tone for your message.');
                    return;
                }

                // Show loading animation
                document.getElementById('loadingContext').textContent = 'Crafting your heartfelt message...';
                document.getElementById('loadingOverlay').style.display = 'flex';

                // Simulate loading
                setTimeout(() => {
                    // In a real app, this would navigate to the message result page
                    window.location.href = 'message-result.html';
                }, 2500);
            });
        });
    </script>
</body>
</html> 